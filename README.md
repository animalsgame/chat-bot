# Клиент для запуска чат-бота в наших играх!
Чат-боты доступны в проектах

#### Побег собачек
https://vk.com/app6787147 | https://ag6.ru/games/play/73952

#### Охотники против грызунов
https://vk.com/app7542283 | https://ag6.ru/games/play/53210

# Установка
### 1: Скачайте архив с проектом, можно по прямой ссылке
https://github.com/animalsgame/chat-bot/archive/refs/heads/main.zip

Откройте архив, перенесите папку chat-bot-main из архива в любое удобное место, например на рабочий стол, перейдите в эту папку, там вы найдёте все файлы которые нужны для запуска бота!

### 2: Для запуска бота нужно установить nodejs (это javascript, но выполняется уже не в браузере)
#### Если у вас windows
nodejs уже находится в проекте, переходите к следующему шагу!
#### Если у вас linux (ubuntu, debian)
Откройте терминал и введите `apt-get install nodejs` подтвердите установку буквой Y

# Создание бота и получение токена
Если вы уже создали бота через игру, пропустите этот шаг.

Зайдите в игру, нажмите на ник системы (она мама всех ботов) `id -2, Зимуся` перейдите в информацию и нажмите на кнопку `создать бота` подтвердите создание, потом перейдите в управление, там будет кнопка для получения токена, скопируйте токен через правый клик, или клавишами `CTRL + C`

Если вы потеряли своего бота, вы можете вызвать его в чате или в привате `@bot1` где 1 = id бота

# Перевод старого кода
Бот был обновлён, появились модули и удобства, необходимо скачать этот проект опять, потому что нужна папка с модулями.  
В свой файл `app.js` внесите изменения:
#### 1: Оберните весь свой код в функцию, не забудьте }; в конце
```js

module.exports = function(bot){

// здесь будет ваш код

};

```
#### 2: Найдите эту строчку, удалите её
```js
var bot=new Bot();
```

#### 3: Сохраните файл, скопируйте его в папку где у вас опять проект с ботом, перенос завершён!


# Запуск
#### Токены теперь хранятся в файле `token.txt` один токен - одна строка.

Если у вас linux, вместо run файла нужно открыть терминал и ввести `node service.js` 

#### Для windows, чтобы быстрее открывать код бота в блокноте (есть файл `edit.bat`) после запуска нажмите enter.
Откройте текстовый файл в папке с ботом (`token.txt`) добавьте токен который вы получили у бота (можно вставить клавишами `CTRL + V`) Сохраните файл, быстрый способ это клавиши `CTRL + S`

Осталось запустить файл `run` если токен правильный, вы увидите в окне информацию о боте, его id, ник и тд. Смотрите свой приват в игре, бот должен сообщить что он в сети!

Бот работает! Уже можно играться готовыми командами, запомним что файл `bot.js` изменять нельзя, а вот `app.js` можно изменять (и нужно) но об этом чуть позже.

#### Код для ботов универсальный, если вы хотите запустить бота для другого проекта.
Получите токен бота через игру, откройте `token.txt` добавьте ещё одну строчку с токеном, сохраните файл и запустите файл `run`.

После изменения кода в `app.js` теперь изменения мгновенно применяются, перезапуск бота теперь не нужен!

### Используйте какой нибудь редактор кода а не стандартный блокнот, в нём весь текст чёрный
Редактор через браузер https://ag6.ru/js_editor

Редактор Notepad++ очень лёгкий и удобный, скачать установщик можно по ссылке  
http://download.notepad-plus-plus.org/repository/7.x/7.2.1/npp.7.2.1.Installer.exe  
Сложностей с установкой возникнуть не должно, скачать и запустить файл, установщик на русском языке, запускаем файл...
Когда предложит выбрать язык нажимаем ок, потом -> далее -> принимаю -> далее -> разверните пункт Localization (нажав на + слева) пролистайте список и поставьте галочку где "Russian" потом -> далее -> поставьте галочку "Create Shortcut on Desktop" -> и финальная кнопка установить. После установки на рабочем столе появится ярлык Notepad++ это и есть новый блокнот

# Минимальный пример app.js
Если нужен очень быстрый старт, или сломался код и нужно проверить работает ли бот, вы можете создать файл app.js с таким кодом,  
у бота будет только команда `пинг`
```js
module.exports = function(bot){

if(!bot.myBotInit){
bot.myBotInit=true;

// этот код выполняется один раз (когда бот запустится) чтобы каждый раз после изменения файла не отправлял уведомление что бот в сети, ведь он и так в сети!
console.log('бот', bot.botInfo);
bot.sendMessage(bot.botInfo.owner, 'Мой владелец, я в сети*em3*', {color:['#f1a0b3', '#FFFF00', '#54EFF7']});

}

bot.cmd('пинг',(user,words)=>{
if(words.length==0)return 'ПОНГ';
});

};
```

# Модули
Каждый модуль в коде содержит комментарии с примерами использования, все модули находятся в папке `modules`  
Важный модуль `botupdate.js` с помощью него вы можете через игру обновлять любой модуль,  
или даже клиент бота `bot.js` прямо через приват в игре, это очень удобно!  
Если в модуль вносятся изменения и публикуется код сюда, вы можете просто обновить модуль, не скачивая проект с ботом повторно.

### Команды доступны только владельцу бота
`bot update client` - обновляет клиент бота (файл bot.js)  
`bot update module имя` - обновляет модуль отдельно, вместо имя укажите имя модуля (например cats)

### Пока пишется продолжение инструкции, познакомьтесь с кодом в файле `app.js`

Вот несколько команд  
`бот ник новый_ник` - устанавливает ник  
`бот цвет #FFFFFF` - устанавливает цвет ника на белый, цвета разделяются пробелом, если указано больше одного цвета, ник будет с градиентом!  
`бот пол ?` - устанавливает пол, по умолчанию ж, вместо ? укажите букву, м - мужской, ж - женский, н - нло  
`бот осебе текст` - устанавливает "о себе" в информации

#### Для подбора цвета вы можете использовать различные сервисы
Например https://colorscheme.ru там внизу справа будет код RGB, то что нужно для команды "бот цвет"
